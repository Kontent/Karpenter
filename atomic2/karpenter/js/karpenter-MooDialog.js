var MooDialog=new Class({Implements:[Options,Events],options:{"class":"MooDialog",title:null,scroll:true,forceScroll:false,useEscKey:true,destroyOnHide:true,autoOpen:true,closeButton:true,onInitialize:function(){this.wrapper.setStyle("display","none")},onBeforeOpen:function(){this.wrapper.setStyle("display","block");this.fireEvent("show")},onBeforeClose:function(){this.wrapper.setStyle("display","none");this.fireEvent("hide")}},initialize:function(b){this.setOptions(b);this.options.inject=this.options.inject||document.body;b=this.options;var c=this.wrapper=new Element("div."+b["class"].replace(" ",".")).inject(b.inject);this.content=new Element("div.content").inject(c);if(b.title){this.title=new Element("div.title").set("text",b.title).inject(c);c.addClass("MooDialogTitle")}if(b.closeButton){this.closeButton=new Element("a.close",{events:{click:this.close.bind(this)}}).inject(c)}if((b.scroll&&Browser.ie6)||b.forceScroll){c.setStyle("position","absolute");var a=c.getPosition(b.inject);window.addEvent("scroll",function(){var d=document.getScroll();c.setPosition({x:a.x+d.x,y:a.y+d.y})})}if(b.useEscKey){document.addEvent("keydown",function(d){if(d.key=="esc"){this.close()}}.bind(this))}this.addEvent("hide",function(){if(b.destroyOnHide){this.destroy()}}.bind(this));this.fireEvent("initialize",c)},setContent:function(){var b=Array.from(arguments);if(b.length==1){b=b[0]}this.content.empty();var a=typeOf(b);if(["string","number"].contains(a)){this.content.set("text",b)}else{this.content.adopt(b)}return this},open:function(){this.fireEvent("beforeOpen",this.wrapper).fireEvent("open");this.opened=true;return this},close:function(){this.fireEvent("beforeClose",this.wrapper).fireEvent("close");this.opened=false;return this},destroy:function(){this.wrapper.destroy()},toElement:function(){return this.wrapper}});Element.implement({MooDialog:function(a){this.store("MooDialog",new MooDialog(a).setContent(this).open());return this}});