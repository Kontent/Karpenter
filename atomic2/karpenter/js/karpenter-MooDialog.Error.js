MooDialog.implement("options",{duration:400,closeOnOverlayClick:true,onInitialize:function(a){this.fx=new Fx.Tween(a,{property:"opacity",duration:this.options.duration}).set(0);this.overlay=new Overlay(this.options.inject,{duration:this.options.duration});if(this.options.closeOnOverlayClick){this.overlay.addEvent("click",this.close.bind(this))}},onBeforeOpen:function(a){this.overlay.open();this.fx.start(1).chain(function(){this.fireEvent("show")}.bind(this))},onBeforeClose:function(a){this.overlay.close();this.fx.start(0).chain(function(){this.fireEvent("hide")}.bind(this))}});